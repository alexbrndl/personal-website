/* ─── Reset ─── */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

img,
picture,
video,
svg {
  display: block;
  max-width: 100%;
}

input,
button,
textarea,
select {
  font: inherit;
  color: inherit;
}

a {
  color: inherit;
  text-decoration: none;
}

ul,
ol {
  list-style: none;
}

/* ─── Variables ─── */
:root {
  --color-timberwolf-1: #fdfcfc;
  --color-timberwolf-50: #fafaf9;
  --color-timberwolf-100: #f4f2f0;
  --color-timberwolf-200: #e9e5e2;
  --color-timberwolf-300: #dad3ce;
  --color-timberwolf-400: #c6bab2;
  --color-timberwolf-500: #b5a79d;
  --color-timberwolf-600: #988b83;
  --color-timberwolf-700: #776b65;
  --color-timberwolf-800: #5e544f;
  --color-timberwolf-900: #4d4541;
  --color-timberwolf-950: #2c2724;
  --color-timberwolf-999: #0b0807;

  --color-malachite-50: #e9ffec;
  --color-malachite-100: #ceffd5;
  --color-malachite-200: #98ffad;
  --color-malachite-300: #00fd72;
  --color-malachite-400: #00eb69;
  --color-malachite-500: #00da60;
  --color-malachite-600: #00ab3f;
  --color-malachite-700: #008b31;
  --color-malachite-800: #006c21;
  --color-malachite-900: #005818;
  --color-malachite-950: #00330c;

  /* Backgrounds */
  --color-bg: var(--color-timberwolf-1);
  --color-bg-foreground: var(--color-timberwolf-100);
  --color-bg-hover: var(--color-timberwolf-200);
  --color-bg-accent: var(--color-malachite-100);
  --color-bg-accent-hover: var(--color-malachite-50);

  /* Text */
  --color-text: var(--color-timberwolf-800);
  --color-text-hover: var(--color-timberwolf-900);
  --color-text-muted: var(--color-timberwolf-500);
  --color-text-muted-hover: var(--color-timberwolf-800);

  /* Accent (text + outlines) */
  --color-accent: var(--color-malachite-800);
  --color-accent-muted: var(--color-malachite-800);

  /* Border */
  --color-border: var(--color-timberwolf-100);

  --font-body: 'Geist', sans-serif;
  --font-mono: 'Geist Mono', monospace;

  --container-max: 44rem;
}

html.dark {
  --color-bg: var(--color-timberwolf-900);
  --color-bg-foreground: var(--color-timberwolf-800);
  --color-bg-accent: var(--color-malachite-900);
  --color-bg-accent-hover: var(--color-malachite-950);

  --color-text: var(--color-timberwolf-50);
  --color-text-hover: var(--color-timberwolf-400);
  --color-text-muted: var(--color-timberwolf-500);
  --color-text-muted-hover: var(--color-timberwolf-50);

  --color-accent: var(--color-malachite-400);
  --color-accent-muted: var(--color-malachite-300);

  --color-border: var(--color-timberwolf-800);
}

/* ─── Base ─── */
html {
  font-family: var(--font-body);
  color: var(--color-text);
  background-color: var(--color-bg);
  letter-spacing: -0.02em;
  line-height: normal;
  scroll-behavior: smooth;
  scroll-padding-top: 2rem;
}

body {
  min-height: 100dvh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ─── Anchor highlight ─── */
.anchor-highlight {
  position: relative;
}

.anchor-highlight::before {
  content: '';
  position: absolute;
  inset: -0.125rem -0.5rem;
  background-color: var(--color-bg-accent);
  border-radius: 0.25rem;
  pointer-events: none;
  z-index: -1;
  animation: anchor-fade 3s ease both;
}

@keyframes anchor-fade {
  0%, 100% { opacity: 0; }
  10% { opacity: 1; }
}

/* ─── Entrance animation ─── */
@keyframes stagger-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.layout > :first-child,
.layout > :last-child,
.layout-main > *,
.bio > * {
  animation: stagger-in 0.5s ease both;
}

/* Header */
.layout > :first-child { animation-delay: 0s; }

/* Page sections — default delays (project, gallery pages) */
.layout-main > :first-child { animation-delay: 0.05s; }
.layout-main > :nth-child(2) { animation-delay: 0.1s; }
.layout-main > :nth-child(3) { animation-delay: 0.15s; }
.layout-main > :nth-child(n+4) { animation-delay: 0.2s; }

/* Bio: skip wrapper, animate each paragraph */
.layout-main > .bio { animation: none; }
/* Project page: only aside animates */
.layout-main > .project-section { animation: none; }
.bio > :first-child { animation-delay: 0s; }
.bio > :nth-child(2) { animation-delay: 0.05s; }
.bio > :nth-child(3) { animation-delay: 0.1s; }
.bio > :nth-child(4) { animation-delay: 0.15s; }
.bio > :nth-child(5) { animation-delay: 0.2s; }
.bio > :nth-child(6) { animation-delay: 0.25s; }
.bio > :nth-child(7) { animation-delay: 0.3s; }
.bio > :nth-child(8) { animation-delay: 0.35s; }
.bio > :nth-child(n+9) { animation-delay: 0.4s; }

/* Sections after bio (études, gallery) — override default delays */
.layout-main > .bio ~ * { animation-delay: 0.45s; }
.layout-main > .bio ~ * ~ * { animation-delay: 0.5s; }

/* Footer */
.layout > :last-child { animation-delay: 0.55s; }

/* Skip animation when navigating with a hash (e.g. /#etudes) */
.no-stagger > :first-child,
.no-stagger > :last-child,
.no-stagger .layout-main > *,
.no-stagger .bio > * {
  animation: none;
}

/* ─── Utility ─── */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* ─── Prose ─── */
.prose {
  max-width: var(--container-max);
  line-height: normal;
}

.prose h1,
.prose h2,
.prose h3 {
  font-weight: 600;
  letter-spacing: -0.04em;
  scroll-margin-top: 2rem;
}

.prose h1 { font-size: 1.5rem; margin-top: 0; margin-bottom: 1.5rem; }
.prose h2 { font-size: 1.125rem; margin-top: 3rem; margin-bottom: 1rem; }
.prose h3, .prose h4 { font-size: 1rem; margin-top: 0; margin-bottom: 0; }
.prose p { margin-bottom: 1.25rem; }

.prose a {
  text-decoration: underline;
  text-decoration-skip-ink: none;
  text-underline-offset: 2px;
}
.prose a:hover { color: var(--color-text-hover); }

.prose code {
  font-family: var(--font-mono);
  font-size: 0.875em;
  background-color: var(--color-timberwolf-100);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
}
html.dark .prose code { background-color: var(--color-timberwolf-800); }

.prose pre {
  background-color: var(--color-timberwolf-900);
  color: var(--color-timberwolf-50);
  padding: 1rem 1.5rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1.5rem 0;
}
.prose pre code { background: none; padding: 0; font-size: 0.875rem; }

.prose img,
.prose video { border-radius: 0.5rem; margin: 2rem 0; }

.prose blockquote {
  border-left: 2px solid var(--color-border);
  padding-left: 1rem;
  color: var(--color-text-muted);
  font-style: italic;
}

.prose ul,
.prose ol { padding-left: 1.5rem; margin-bottom: 1.25rem; }
.prose li { margin-bottom: 0.25rem; }

.prose h2 {
  display: flex;
  align-items: center;
  gap: 1rem;
}
.prose h2,
.prose h3 {
  scroll-margin-top: calc(6rem - 1px);
}
.prose h2::after {
  content: '';
  flex: 1;
  height: 1px;
  background-color: var(--color-border);
}
.prose figure {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  margin: 3rem 0;
}
.prose figure img {
  width: 100%;
  border-radius: 0.5rem;
  border: 1px solid var(--color-border);
  margin: 0;
}
.prose figcaption {
  font-size: 0.875rem;
  letter-spacing: -0.04em;
  color: var(--color-text-muted);
  text-align: center;
}
